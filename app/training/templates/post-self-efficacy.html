<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <title></title>

  <script type="text/javascript" src="{{url_for('static', filename='js/jquery.js')}}"></script>
  <link rel="stylesheet" href="{{url_for('static', filename='css/bootstrap.min.css')}}">
  <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
 <link rel="stylesheet" href="/resources/demos/style.css">
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
  <style>
    .error {
      color: red;
      margin-left: 5px;
    }

    label.error {
      display: inline;
    }
    .ui-dialog-titlebar-close {
     visibility: hidden;
 }
  </style>

</head>

<body>

  <div class="alert alert-success" role="alert">
    <h4 class="alert-heading"></h4>
    <p>   Please indicate how confident you are in your ability to do each of the following tasks effectively? 0 means 'no confidence' while 9 means 'complete confidence'.  The button (Proceed next) will be enabled once you select all options</p>
    <hr>
    <b>Amount that you have enarned so far: <span id="bonus"></span></b>. You will earn additional 20 cents after completing this task!
  </div>


    <div id="dialog" title="Basic dialog">
      <h4 style="color:green;">Please reassess your skills regarding talking to a stressed person</h4>
      <p>You have already interacted with this survey before the training task. We just want to know whether your acquired skills after the training have enabled you to better investigate about the worries of a stressed person than before? </p>
      <p>Again, if you donâ€™t understand some items from the survey, just fill them out based on your best understanding. </p>
      <p> You will be awarded 20 cents in answering this survey! </p>


        </div>

  <table class="table table-dark">
    <thead class="thead-dark">
      <tr>
        <th scope="col">Tasks</th>
        <th scope="col">0</th>
        <th scope="col">1</th>
        <th scope="col">2</th>
        <th scope="col">3</th>
        <th scope="col">4</th>
        <th scope="col">5</th>
        <th scope="col">6</th>
        <th scope="col">7</th>
        <th scope="col">8</th>
        <th scope="col">9</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td scope="row">Help your client to understand his or her thoughts, feelings, and actions.</td>
        <td><input type="radio" value="0" name="understand" /></td>
        <td><input type="radio" value="1" name="understand" /></td>
        <td><input type="radio" value="2" name="understand" /></td>
        <td><input type="radio" value="3" name="understand" /></td>
        <td><input type="radio" value="4" name="understand" /></td>
        <td><input type="radio" value="5" name="understand" /></td>
        <td><input type="radio" value="6" name="understand" /></td>
        <td><input type="radio" value="7" name="understand" /></td>
        <td><input type="radio" value="8" name="understand" /></td>
        <td><input type="radio" value="9" name="understand" /></td>
      </tr>
      <tr>
        <td scope="row">Know what to do or say next after your client talks.</td>
        <td><input type="radio" value="0" name="say_next" /></td>
        <td><input type="radio" value="1" name="say_next" /></td>
        <td><input type="radio" value="2" name="say_next" /></td>
        <td><input type="radio" value="3" name="say_next" /></td>
        <td><input type="radio" value="4" name="say_next" /></td>
        <td><input type="radio" value="5" name="say_next" /></td>
        <td><input type="radio" value="6" name="say_next" /></td>
        <td><input type="radio" value="7" name="say_next" /></td>
        <td><input type="radio" value="8" name="say_next" /></td>
        <td><input type="radio" value="9" name="say_next" /></td>
      </tr>
      <tr>
        <td scope="row">Help your client to talk about his or her concerns at a deep level.</td>
        <td><input type="radio" value="0" name="Help_client_to_talk" /></td>
        <td><input type="radio" value="1" name="Help_client_to_talk" /></td>
        <td><input type="radio" value="2" name="Help_client_to_talk" /></td>
        <td><input type="radio" value="3" name="Help_client_to_talk" /></td>
        <td><input type="radio" value="4" name="Help_client_to_talk" /></td>
        <td><input type="radio" value="5" name="Help_client_to_talk" /></td>
        <td><input type="radio" value="6" name="Help_client_to_talk" /></td>
        <td><input type="radio" value="7" name="Help_client_to_talk" /></td>
        <td><input type="radio" value="8" name="Help_client_to_talk" /></td>
        <td><input type="radio" value="9" name="Help_client_to_talk" /></td>
      </tr>
      <tr>
        <td scope="row">Build a clear conceptualization of your client and his or her counseling issues</td>
        <td><input type="radio" value="0" name="conceptualization" /></td>
        <td><input type="radio" value="1" name="conceptualization" /></td>
        <td><input type="radio" value="2" name="conceptualization" /></td>
        <td><input type="radio" value="3" name="conceptualization" /></td>
        <td><input type="radio" value="4" name="conceptualization" /></td>
        <td><input type="radio" value="5" name="conceptualization" /></td>
        <td><input type="radio" value="6" name="conceptualization" /></td>
        <td><input type="radio" value="7" name="conceptualization" /></td>
        <td><input type="radio" value="8" name="conceptualization" /></td>
        <td><input type="radio" value="9" name="conceptualization" /></td>
      </tr>
      <tr>
        <td scope="row">Help your client to explore his or her thoughts, feelings, and actions.</td>
        <td><input type="radio" value="0" name="explore" /></td>
        <td><input type="radio" value="1" name="explore" /></td>
        <td><input type="radio" value="2" name="explore" /></td>
        <td><input type="radio" value="3" name="explore" /></td>
        <td><input type="radio" value="4" name="explore" /></td>
        <td><input type="radio" value="5" name="explore" /></td>
        <td><input type="radio" value="6" name="explore" /></td>
        <td><input type="radio" value="7" name="explore" /></td>
        <td><input type="radio" value="8" name="explore" /></td>
        <td><input type="radio" value="9" name="explore" /></td>
      </tr>
      <tr>
        <td scope="row">Respond with the best helping skill, depending on what your client needs at a given moment.</td>
        <td><input type="radio" value="0" name="helping_skill" /></td>
        <td><input type="radio" value="1" name="helping_skill" /></td>
        <td><input type="radio" value="2" name="helping_skill" /></td>
        <td><input type="radio" value="3" name="helping_skill" /></td>
        <td><input type="radio" value="4" name="helping_skill" /></td>
        <td><input type="radio" value="5" name="helping_skill" /></td>
        <td><input type="radio" value="6" name="helping_skill" /></td>
        <td><input type="radio" value="7" name="helping_skill" /></td>
        <td><input type="radio" value="8" name="helping_skill" /></td>
        <td><input type="radio" value="9" name="helping_skill" /></td>
      </tr>
      <tr>
        <td scope="row">Help your client to set realistic counseling goals.</td>
        <td><input type="radio" value="0" name="realistic_counseling_goals" /></td>
        <td><input type="radio" value="1" name="realistic_counseling_goals" /></td>
        <td><input type="radio" value="2" name="realistic_counseling_goals" /></td>
        <td><input type="radio" value="3" name="realistic_counseling_goals" /></td>
        <td><input type="radio" value="4" name="realistic_counseling_goals" /></td>
        <td><input type="radio" value="5" name="realistic_counseling_goals" /></td>
        <td><input type="radio" value="6" name="realistic_counseling_goals" /></td>
        <td><input type="radio" value="7" name="realistic_counseling_goals" /></td>
        <td><input type="radio" value="8" name="realistic_counseling_goals" /></td>
        <td><input type="radio" value="9" name="realistic_counseling_goals" /></td>
      </tr>
      <tr>
        <td scope="row">Keep sessions on track and focused.</td>
        <td><input type="radio" value="0" name="focused" /></td>
        <td><input type="radio" value="1" name="focused" /></td>
        <td><input type="radio" value="2" name="focused" /></td>
        <td><input type="radio" value="3" name="focused" /></td>
        <td><input type="radio" value="4" name="focused" /></td>
        <td><input type="radio" value="5" name="focused" /></td>
        <td><input type="radio" value="6" name="focused" /></td>
        <td><input type="radio" value="7" name="focused" /></td>
        <td><input type="radio" value="8" name="focused" /></td>
        <td><input type="radio" value="9" name="focused" /></td>
      </tr>
      <tr>
        <td scope="row">Remain aware of your intentions (i.e., the purposes of your interventions) during sessions.</td>
        <td><input type="radio" value="0" name="intentions" /></td>
        <td><input type="radio" value="1" name="intentions" /></td>
        <td><input type="radio" value="2" name="intentions" /></td>
        <td><input type="radio" value="3" name="intentions" /></td>
        <td><input type="radio" value="4" name="intentions" /></td>
        <td><input type="radio" value="5" name="intentions" /></td>
        <td><input type="radio" value="6" name="intentions" /></td>
        <td><input type="radio" value="7" name="intentions" /></td>
        <td><input type="radio" value="8" name="intentions" /></td>
        <td><input type="radio" value="9" name="intentions" /></td>
      </tr>
      <tr>
        <td scope="row">Help your client to decide what actions to take regarding his or her problems.</td>
        <td><input type="radio" value="0" name="planning" /></td>
        <td><input type="radio" value="1" name="planning" /></td>
        <td><input type="radio" value="2" name="planning" /></td>
        <td><input type="radio" value="3" name="planning" /></td>
        <td><input type="radio" value="4" name="planning" /></td>
        <td><input type="radio" value="5" name="planning" /></td>
        <td><input type="radio" value="6" name="planning" /></td>
        <td><input type="radio" value="7" name="planning" /></td>
        <td><input type="radio" value="8" name="planning" /></td>
        <td><input type="radio" value="9" name="planning" /></td>
      </tr>
    </tbody>
  </table>
  <div class="text-center">
    <label for="message"></label>
    <button type="button" class="btn btn-warning" id='nextbtn'>Proceed Next</button>
  </div>
  <script>
 $(document).ready(function(){
   $("#bonus").text(parseFloat(gup('bonus')).toFixed(2));
 });
  $(function() {
              $("#dialog").dialog({
                modal: true,
                width: 500,
                resizeable: false,
                draggable: false,

                  buttons: {
                      OK: function() {
                          $(this).dialog("close");
                      }
                  },
                  title: "Instructions"
              });
          });


    var understand;
    var say_next;
    var Help_client_to_talk;
    var conceptualization;
    var explore;
    var helping_skill;
    var realistic_counseling_goals;
    var focused;
    var intentions;
    var planning;
    $('input:radio').click(function() {
      understand = $('input:radio[name=understand]:checked').val();
      say_next = $('input:radio[name=say_next]:checked').val();
      Help_client_to_talk = $('input:radio[name=Help_client_to_talk]:checked').val();
      conceptualization = $('input:radio[name=conceptualization]:checked').val();
      explore = $('input:radio[name=explore]:checked').val();
      helping_skill = $('input:radio[name=helping_skill]:checked').val();
      realistic_counseling_goals = $('input:radio[name=realistic_counseling_goals]:checked').val();
      focused = $('input:radio[name=focused]:checked').val();
      intentions = $('input:radio[name=intentions]:checked').val();
      planning = $('input:radio[name=planning]:checked').val();

    });

    //http://jsfiddle.net/b3fkguy9/2/
    //this function will keep the button diabled unless all options are chosen.
    $(function() {
      var button = $('#nextbtn').prop('disabled', true);
      var radios = $('input[type="radio"]');
      var arr = $.map(radios, function(el) {
        return el.name;
      });

      var groups = $.grep(arr, function(v, k) {
        return $.inArray(v, arr) === k;
      }).length;

      radios.on('change', function() {
        button.prop('disabled', radios.filter(':checked').length < groups);
      });
    });
//////////////////////////////////////////////////////////////////////////////

function gup(name) {
  name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
  var regexS = "[\\?&]" + name + "=([^&#]*)";
  var regex = new RegExp(regexS);
  var results = regex.exec(window.location.href);
  if (results == null)
    return "";
  else
    return unescape(results[1]);
}

  $('#nextbtn').click(function(){
    $.ajax({
            type: "POST",
            url: "/scale_data",
            data: JSON.stringify({"understand": understand, "say_next": say_next, "Help_client_to_talk": Help_client_to_talk,
                                  "conceptualization": conceptualization, "explore": explore, "helping_skill": helping_skill,
                                "realistic_counseling_goals": realistic_counseling_goals, "focused": focused,
                                 "intentions": intentions, "planning": planning, 'workerId': gup('workerId'), 'status': 'after'}),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (data) {
             console.log(typeof(JSON.stringify(data)));
             // alert('done!');
        }
    });

    var qs = {
      'workerId': gup('workerId'),
      'bonus':parseFloat(gup('bonus')) + 0.20
    };

    if (localStorage.getItem("standingAnswer_testing") != null) {
      localStorage.removeItem("standingAnswer_testing");
    }

    if (localStorage.getItem("progressBarWidth_testing") != null) {
      localStorage.removeItem("progressBarWidth_testing");
    }

    if (localStorage.getItem("bonus_testing") != null) {
      localStorage.removeItem("bonus_testing");
    }

    window.location.replace("http://127.0.0.1:5000/test_task" + "?" +$.param(qs));


  });
  </script>
  <script type="text/javascript" src="{{url_for('static', filename='js/bootstrap.min.js')}}"></script>



</body>

</html>
